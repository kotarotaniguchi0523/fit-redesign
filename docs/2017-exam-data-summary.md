# 2017年度小テストデータ抽出サマリー

## 完了した作業

### 1. 型定義の拡張
- **ファイル**: `src/types/index.ts`
- **変更内容**: Question型に以下のフィールドを追加
  - `figureDescription?: string` - 図の説明（テキストのみの図はここを使用）
  - `figureData?: FigureData` - 図データ（truthTable/binaryTree/stateDiagram/parityCheck など）

### 2. ディレクトリ構造の作成
- **作成ディレクトリ**: `src/data/exams/`
- **目的**: 小テストごとにファイルを分割して管理

### 3. 2017年度データファイルの作成

#### 作成されたファイル:

1. **`src/data/exams/exam1-base.ts`**
   - 基数変換（exam1_2017）
   - 負数表現（exam2_2017）
   - 状態: PDFファイル不足のため、解答HTMLから逆算

2. **`src/data/exams/exam4-logic.ts`**
   - 論理演算（exam4_2017）
   - 問題数: 5問
   - PDF: Exam4e-logic.pdf から抽出完了
   - 図が必要な問題: 問題3（真理値表）

3. **`src/data/exams/exam6-fsm.ts`**
   - 確率・BNF・データ構造（exam6_2017）
   - 問題数: 5問
   - PDF: Exam6e-FSM.pdf から抽出完了

4. **`src/data/exams/exam7-ecc.ts`**
   - 符号理論（exam7_2017）
   - 問題数: 5問
   - PDF: Exam7e-ECC.pdf から抽出完了
   - 図が必要な問題: 問題4（水平垂直パリティ検査符号）

5. **`src/data/exams/exam8-stack.ts`**
   - データ構造（exam8_2017）
   - 問題数: 5問
   - 状態: PDFファイル不足のため、解答HTMLから逆算
   - 図が必要な問題: 問題1（二分木）

6. **`src/data/exams/index.ts`**
   - 全データファイルのエクスポート

### 4. 既存ファイルの更新
- **ファイル**: `src/data/exams.ts`
- **変更内容**: 2017年度のデータを各ExamByYearに統合

### 5. ドキュメント作成
- **`docs/figures-needed.md`**: 図が必要な問題のリスト
- **`docs/2017-exam-data-summary.md`**: この作業サマリー

---

## 2017年度小テスト構成

| 番号 | タイトル | PDFファイル | 状態 | 問題数 |
|------|---------|------------|------|--------|
| 1 | 基数変換 | Exam1e-Base.pdf | PDFなし | 5 |
| 2 | 負数表現 | Exam2e-Negative.pdf | PDFなし | 5 |
| 3 | 論理演算 | Exam4e-logic.pdf | 完了 | 5 |
| 4 | 確率・BNF・データ構造 | Exam6e-FSM.pdf | 完了 | 5 |
| 5 | 符号理論 | Exam7e-ECC.pdf | 完了 | 5 |
| 6 | データ構造 | Exam8e-Stack.pdf | PDFなし | 5 |

**解答ソース**: `public/pdf/Exam2017-Ans.html`

---

## 不足しているPDFファイル

以下のPDFファイルが存在しないため、問題文の詳細が不明です。
解答HTMLから逆算してデータを作成していますが、正確性の確認が必要です。

1. **Exam1e-Base.pdf** - 2017年度 基数変換
2. **Exam2e-Negative.pdf** - 2017年度 負数表現
3. **Exam8e-Stack.pdf** - 2017年度 データ構造

### 対応策:
- 他の年度（2013-2016）の同テーマPDFから問題パターンを推測
- 解答の値から問題文を逆算
- 実際のPDFファイルが見つかり次第、更新が必要

---

## 図が必要な問題（2017年度）

### 実装済み（figureDescription / figureData を設定）

1. **Exam4e 問題3**: 真理値表
   - figureDescription: "真理値表: X, Y, F の3列。(0,0,1), (0,1,0), (1,0,0), (1,1,1)"

2. **Exam7e 問題4**: 水平垂直パリティ検査符号
   - figureDescription: "水平垂直パリティ検査符号の構造図"

3. **Exam8 問題1**: 二分木（推定）
   - figureDescription: "二分木の図"

---

## 次のステップ

### 優先度: 高
1. **不足PDFの確認**
   - Exam1e, Exam2e, Exam8e が本当に存在しないか再確認
   - 代替ファイル名の可能性を調査

2. **2013-2016年度データの作成**
   - 同じパターンで各年度のデータを抽出
   - 優先順位: 2016 → 2015 → 2014 → 2013

3. **図コンポーネントの実装**
   - 真理値表コンポーネント
   - 二分木描画コンポーネント
   - フローチャート描画コンポーネント

### 優先度: 中
4. **データ検証**
   - 作成したデータと解答HTMLの整合性確認
   - 不足している問題文の精査

5. **単体テストの作成**
   - データ構造の型チェック
   - 必須フィールドの存在確認

### 優先度: 低
6. **ドキュメント拡充**
   - 問題パターンの分析
   - 年度別の出題傾向まとめ

---

## 技術的メモ

### ファイル命名規則
- 小テスト別: `exam{番号}-{テーマ}.ts`
- 例: `exam4-logic.ts`, `exam7-ecc.ts`

### データ構造
```typescript
{
  id: "exam{番号}-{年度}-q{問題番号}",
  number: 問題番号,
  text: "問題文",
  options?: [...],  // 選択肢がある場合
  answer: "解答",
  explanation?: "解説",
  figureDescription?: "図の説明", // 図がある場合のテキスト説明
  figureData?: FigureData // 図コンポーネント用データ（ある場合）
}
```

### PDFパスの規則
- 2017年度サフィックス: `e`
- 例: `Exam4e-logic.pdf`, `Exam7e-ECC.pdf`

---

## 統計

- **作成したファイル数**: 8
- **抽出した問題数**: 30問（2017年度のみ）
- **図が必要な問題**: 3問（確認済み）
- **PDFから正常抽出**: 3ファイル（Exam4e, Exam6e, Exam7e）
- **解答HTMLから逆算**: 3ファイル（Exam1, Exam2, Exam8）

---

## 備考

- 2017年度の解答HTMLは6つの問題セクションを含む
- PDFは3つしか存在しないため、複数の小テストが統合されている可能性がある
- 実際の小テスト構成は年度によって変化しており、2013年度（9小テスト）から2017年度（統合版）へと進化している
